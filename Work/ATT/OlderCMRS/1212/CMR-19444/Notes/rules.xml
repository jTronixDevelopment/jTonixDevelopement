ATT-AEG-Telco-O-R-G-C2C ATT-AEG-Telco-O-P-G-T60 ATT-DTM-C-RA-HS_SS_Telco-ManageBill-O-R-G-1603-C2C

<content-group id="ATT-AEG-Telco">
  <cg-ref ref-id="HS_SS-All"/>
  <cg-ref ref-id="HS_SS-Proactive"/>
</content-group>

<business-rule id="11001" name="ATT-AEG-Telco-O-P-G-T60" funnel-level="3">
  <business-unit-id>19000956</business-unit-id>
  <agent-profile>
    <agent-group-id>10004241</agent-group-id>
  </agent-profile>
  <q-threshold>1.0</q-threshold>
  <rule-attributes>
    <attribute>
      <name>Unrecognized_Page_URL</name>
      <value>
        <string-variable-ref var-id="unrecPageURL"/>
      </value>
    </attribute>
  </rule-attributes>
  <condition>
    <when>
      <custom-event event="launchPageInactivity">
        <delay>
          <duration>PT60S</duration>
        </delay>
      </custom-event>
    </when>
    <and>
      <not>
        <is-device-type type="Phone"/>
      </not>
      <where>
        <content-group-check cg-id="ATT-AEG-Telco"/>
      </where>
      <exists>
        <object-access deref-expression="_getCookie('TATS-SS-TokenID')" object-id="CM"/>
      </exists>
      <date-compare op="after">
        <now/>
        <date-variable-ref var-id="lastPageInteraction">
          <offset>PT59S</offset>
        </date-variable-ref>
      </date-compare>
      <not>
        <boolean-variable-ref var-id="isDirectvCustomer"/>
      </not>
      <string-compare test="equals">
        <as-string>
          <js-string-ref js-var-id="ddo.getVar('user.account.serviceType')"/>
        </as-string>
        <string>Telco</string>
      </string-compare>
      <date-compare op="after">
        <now/>
        <date-variable-ref var-id="SuppressProactiveRules-Timer">
          <offset>PT300S</offset>
        </date-variable-ref>
      </date-compare>
    </and>
  </condition>
  <actions>
    <fire-custom-event event="setNameToAgentAlias"/>
    <show-proactive>
      <chat-spec>
        <chat-spec-name>
          <string-variable-ref var-id="SS_ATT-HS-SS_Proactive_Desk_Tab"/>
        </chat-spec-name>
        <automaton-spec>
          <automaton-data-map>
            <item name="tGuardToken">
              <as-string><object-access deref-expression="_getCookie('TATS-SS-TokenID')" object-id="CM"/></as-string>
            </item>
            <item name="BAN">
              <string-variable-ref var-id="lpBAN"/>
            </item>
            <item name="BTN">
              <string-variable-ref var-id="lpBTN"/>
            </item>
          </automaton-data-map>
        </automaton-spec>
      </chat-spec>
    </show-proactive>
  </actions>
</business-rule>
<business-rule id="123123456" name="ATT-AEG-Telco-O-R-G-C2C">
  <business-unit-id>19000956</business-unit-id>
  <agent-profile>
    <agent-group-id>10005958</agent-group-id>
  </agent-profile>
  <q-threshold>1.2</q-threshold>
  <rule-attributes>
    <attribute>
      <name>Unrecognized_Page_URL</name>
      <value>
        <string-variable-ref var-id="unrecPageURL"/>
      </value>
    </attribute>
  </rule-attributes>
  <condition>
    <when>
      <custom-event event="onDDOPageLoadAction"/>
    </when>
    <and>
      <not>
        <is-device-type type="Phone"/>
      </not>
      <exists>
        <object-access deref-expression="_getCookie('TATS-SS-TokenID')" object-id="CM"/>
      </exists>
      <where>
        <content-group-check cg-id="ATT-AEG-Telco"/>
      </where>
      <not>
        <or>
          <boolean-variable-ref var-id="isDirectvCustomer"/>
          <boolean-variable-ref var-id="isSmbCustomer"/>
        </or>
      </not>
      <string-compare test="equals">
        <as-string>
          <js-string-ref js-var-id="ddo.getVar('user.account.serviceType')"/>
        </as-string>
        <string>Telco</string>
      </string-compare>
    </and>
  </condition>
  <actions>
    <fire-custom-event event="setNameToAgentAlias"/>
    <show-c2chat>
      <c2c-spec>
        <c2c-spec-id>
          <number-variable-ref var-id="c2cspec"/>
        </c2c-spec-id>
        <c2c-theme>
          <c2c-theme-name>
            <string>ATT-Anchored-Bottom_C2C</string>
          </c2c-theme-name>
        </c2c-theme>
        <chat-spec>
          <chat-spec-name>
            <string-variable-ref var-id="ATT_Auto_Desk_Tab"/>
          </chat-spec-name>
          <automaton-spec>
            <automaton-data-map>
              <item name="acif_id">
                <number>203</number>
              </item>
              <item name="name">
                <string>Standalone Inline Auth Desktop</string>
              </item>
              <item name="acif_version">
                <string-constant-ref name="DEFAULT_ACIF_VERSION"/>
              </item>
              <item name="tGuardToken">
                <as-string>
                  <object-access deref-expression="_getCookie('TATS-SS-TokenID')" object-id="CM"/>
                </as-string>
              </item>
            </automaton-data-map>
          </automaton-spec>
        </chat-spec>
        <check-agent-availability-interval>PT90S</check-agent-availability-interval>
      </c2c-spec>
    </show-c2chat>
  </actions>
</business-rule>
